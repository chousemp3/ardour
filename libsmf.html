<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<meta property="og:title" content="Ardour Source Documentation" />
<meta property="og:image" content="/images/logo.png" />
<meta property="og:description" content="the open source cross-platform DAW" />
<meta property="og:url" content="https://ardour.org/" />
<title>Ardour: libsmf - Standard MIDI File format library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="/images/icons/favicon.ico"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript" src="toggle-alternative-theme.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeParagraphLink.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeTabs.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<link href="custom-alternative.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Ardour-icon_48px.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Ardour
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('libsmf.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">libsmf - Standard MIDI File format library</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>An smf_t structure represents a "song". Every valid smf contains one or more tracks. Tracks contain zero or more events. Libsmf doesn't care about actual <a class="el" href="namespaceMIDI.html">MIDI</a> data, as long as it is valid from the <a class="el" href="namespaceMIDI.html">MIDI</a> specification point of view - it may be realtime message, <a class="el" href="classSysEx.html">SysEx</a>, whatever.</p>
<p>The only field in smf_t, smf_track_t, smf_event_t and smf_tempo_t structures your code may modify is event-&gt;midi_buffer and event-&gt;midi_buffer_length. Do not modify other fields, <em>ever</em>. You may read them, though. Do not declare static instances of these types, i.e. never do something like this: "smf_t smf;". Always use "smf_t *smf = smf_new();". The same applies to smf_track_t and smf_event_t.</p>
<p>Say you want to load a Standard <a class="el" href="namespaceMIDI.html">MIDI</a> File (.mid) file and play it back somehow. This is (roughly) how you do this:</p>
<div class="fragment"><div class="line">   <a class="code hl_struct" href="structsmf__struct.html">smf_t</a> *smf;</div>
<div class="line">   <a class="code hl_struct" href="structsmf__event__struct.html">smf_event_t</a> *event;</div>
<div class="line"> </div>
<div class="line">   smf = <a class="code hl_function" href="smf_8h.html#a04196d97efad70b7195211afa54d9d10">smf_load</a>(file_name);</div>
<div class="line">   <span class="keywordflow">if</span> (smf == NULL) {</div>
<div class="line">           Whoops, something went wrong.</div>
<div class="line">           <span class="keywordflow">return</span>;</div>
<div class="line">   }</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">while</span> ((event = <a class="code hl_function" href="smf_8h.html#a69cf9d73c7559ed3fde4b7a395ef9146">smf_get_next_event</a>(smf)) != NULL) {</div>
<div class="line">   <span class="keywordflow">if</span> (<a class="code hl_function" href="smf_8h.html#a936400e989b9d2dddb35231469a5701f">smf_event_is_metadata</a>(event))</div>
<div class="line">           <span class="keywordflow">continue</span>;</div>
<div class="line"> </div>
<div class="line">           wait until <span class="keyword">event</span>-&gt;time_seconds.</div>
<div class="line">           feed_to_midi_output(event-&gt;<a class="code hl_variable" href="structsmf__event__struct.html#a98290d992a54c7c1cca4f0faf3974c93">midi_buffer</a>, event-&gt;<a class="code hl_variable" href="structsmf__event__struct.html#a779924dfbeb3b3a536f202addca1e817">midi_buffer_length</a>);</div>
<div class="line">   }</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="smf_8h.html#a13196084ce94c164e4b6c7387002045a">smf_delete</a>(smf);</div>
<div class="ttc" id="asmf_8h_html_a04196d97efad70b7195211afa54d9d10"><div class="ttname"><a href="smf_8h.html#a04196d97efad70b7195211afa54d9d10">smf_load</a></div><div class="ttdeci">smf_t * smf_load(FILE *)</div></div>
<div class="ttc" id="asmf_8h_html_a13196084ce94c164e4b6c7387002045a"><div class="ttname"><a href="smf_8h.html#a13196084ce94c164e4b6c7387002045a">smf_delete</a></div><div class="ttdeci">void smf_delete(smf_t *smf)</div></div>
<div class="ttc" id="asmf_8h_html_a69cf9d73c7559ed3fde4b7a395ef9146"><div class="ttname"><a href="smf_8h.html#a69cf9d73c7559ed3fde4b7a395ef9146">smf_get_next_event</a></div><div class="ttdeci">smf_event_t * smf_get_next_event(smf_t *smf)</div></div>
<div class="ttc" id="asmf_8h_html_a936400e989b9d2dddb35231469a5701f"><div class="ttname"><a href="smf_8h.html#a936400e989b9d2dddb35231469a5701f">smf_event_is_metadata</a></div><div class="ttdeci">int smf_event_is_metadata(const smf_event_t *event)</div></div>
<div class="ttc" id="astructsmf__event__struct_html"><div class="ttname"><a href="structsmf__event__struct.html">smf_event_struct</a></div><div class="ttdef"><b>Definition</b> <a href="smf_8h_source.html#l00302">smf.h:302</a></div></div>
<div class="ttc" id="astructsmf__event__struct_html_a779924dfbeb3b3a536f202addca1e817"><div class="ttname"><a href="structsmf__event__struct.html#a779924dfbeb3b3a536f202addca1e817">smf_event_struct::midi_buffer_length</a></div><div class="ttdeci">size_t midi_buffer_length</div><div class="ttdef"><b>Definition</b> <a href="smf_8h_source.html#l00323">smf.h:323</a></div></div>
<div class="ttc" id="astructsmf__event__struct_html_a98290d992a54c7c1cca4f0faf3974c93"><div class="ttname"><a href="structsmf__event__struct.html#a98290d992a54c7c1cca4f0faf3974c93">smf_event_struct::midi_buffer</a></div><div class="ttdeci">uint8_t * midi_buffer</div><div class="ttdef"><b>Definition</b> <a href="smf_8h_source.html#l00320">smf.h:320</a></div></div>
<div class="ttc" id="astructsmf__struct_html"><div class="ttname"><a href="structsmf__struct.html">smf_struct</a></div><div class="ttdef"><b>Definition</b> <a href="smf_8h_source.html#l00234">smf.h:234</a></div></div>
</div><!-- fragment --><p>Saving works like this:</p>
<div class="fragment"><div class="line">   <a class="code hl_struct" href="structsmf__struct.html">smf_t</a> *smf;</div>
<div class="line"><a class="code hl_struct" href="structsmf__track__struct.html">smf_track_t</a> *track;</div>
<div class="line"><a class="code hl_struct" href="structsmf__event__struct.html">smf_event_t</a> *event;</div>
<div class="line"> </div>
<div class="line">   smf = <a class="code hl_function" href="smf_8h.html#a6cf7405620231ef26bbdcf55ea3bcaee">smf_new</a>();</div>
<div class="line">   <span class="keywordflow">if</span> (smf == NULL) {</div>
<div class="line">           Whoops.</div>
<div class="line">           <span class="keywordflow">return</span>;</div>
<div class="line">   }</div>
<div class="line"> </div>
<div class="line">   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt;= number of tracks; i++) {</div>
<div class="line">           track = <a class="code hl_function" href="smf_8h.html#a301e6df492a87d9ee787df9468962194">smf_track_new</a>();</div>
<div class="line">           <span class="keywordflow">if</span> (track == NULL) {</div>
<div class="line">                   Whoops.</div>
<div class="line">                   <span class="keywordflow">return</span>;</div>
<div class="line">           }</div>
<div class="line"> </div>
<div class="line">           <a class="code hl_function" href="smf_8h.html#a52ea0fb8ed789b6231f5e68de2340a5d">smf_add_track</a>(smf, track);</div>
<div class="line"> </div>
<div class="line">           <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 1; j &lt;= number of events you want to put into <span class="keyword">this</span> track; j++) {</div>
<div class="line">                   <span class="keyword">event</span> = <a class="code hl_function" href="smf_8h.html#ac22e3575151470e85a8bc32bacd53069">smf_event_new_from_pointer</a>(your <a class="code hl_namespace" href="namespaceMIDI.html">MIDI</a> message, message length);</div>
<div class="line">                   <span class="keywordflow">if</span> (event == NULL) {</div>
<div class="line">                           Whoops.</div>
<div class="line">                           <span class="keywordflow">return</span>;</div>
<div class="line">                   }</div>
<div class="line"> </div>
<div class="line">                   smf_track_add_event_seconds(track, event, seconds since start of the song);</div>
<div class="line">           }</div>
<div class="line">   }</div>
<div class="line"> </div>
<div class="line">   ret = <a class="code hl_function" href="smf_8h.html#ac291e35003148c299da38d8055dffd88">smf_save</a>(smf, file_name);</div>
<div class="line">   <span class="keywordflow">if</span> (ret) {</div>
<div class="line">           Whoops, saving failed <span class="keywordflow">for</span> some reason.</div>
<div class="line">           <span class="keywordflow">return</span>;</div>
<div class="line">   }</div>
<div class="line"> </div>
<div class="line"><a class="code hl_function" href="smf_8h.html#a13196084ce94c164e4b6c7387002045a">smf_delete</a>(smf);</div>
<div class="ttc" id="anamespaceMIDI_html"><div class="ttname"><a href="namespaceMIDI.html">MIDI</a></div><div class="ttdef"><b>Definition</b> <a href="midi__region__view_8h_source.html#l00050">midi_region_view.h:50</a></div></div>
<div class="ttc" id="asmf_8h_html_a301e6df492a87d9ee787df9468962194"><div class="ttname"><a href="smf_8h.html#a301e6df492a87d9ee787df9468962194">smf_track_new</a></div><div class="ttdeci">smf_track_t * smf_track_new(void)</div></div>
<div class="ttc" id="asmf_8h_html_a52ea0fb8ed789b6231f5e68de2340a5d"><div class="ttname"><a href="smf_8h.html#a52ea0fb8ed789b6231f5e68de2340a5d">smf_add_track</a></div><div class="ttdeci">void smf_add_track(smf_t *smf, smf_track_t *track)</div></div>
<div class="ttc" id="asmf_8h_html_a6cf7405620231ef26bbdcf55ea3bcaee"><div class="ttname"><a href="smf_8h.html#a6cf7405620231ef26bbdcf55ea3bcaee">smf_new</a></div><div class="ttdeci">smf_t * smf_new(void)</div></div>
<div class="ttc" id="asmf_8h_html_ac22e3575151470e85a8bc32bacd53069"><div class="ttname"><a href="smf_8h.html#ac22e3575151470e85a8bc32bacd53069">smf_event_new_from_pointer</a></div><div class="ttdeci">smf_event_t * smf_event_new_from_pointer(const void *midi_data, size_t len)</div></div>
<div class="ttc" id="asmf_8h_html_ac291e35003148c299da38d8055dffd88"><div class="ttname"><a href="smf_8h.html#ac291e35003148c299da38d8055dffd88">smf_save</a></div><div class="ttdeci">int smf_save(smf_t *smf, FILE *file)</div></div>
<div class="ttc" id="astructsmf__track__struct_html"><div class="ttname"><a href="structsmf__track__struct.html">smf_track_struct</a></div><div class="ttdef"><b>Definition</b> <a href="smf_8h_source.html#l00276">smf.h:276</a></div></div>
</div><!-- fragment --><p>There are two basic ways of getting <a class="el" href="namespaceMIDI.html">MIDI</a> data out of smf - sequential or by track/event number. You may mix them if you need to. First one is used in the example above - seek to the point from which you want the playback to start (using smf_seek_to_seconds(), <a class="el" href="smf_8h.html#ace3921f2b68007024b314a1cbd9f15f5">smf_seek_to_pulses()</a> or <a class="el" href="smf_8h.html#ae3fb1d4a7a7a5918762175b0bc41ab78">smf_seek_to_event()</a>) and then do <a class="el" href="smf_8h.html#a69cf9d73c7559ed3fde4b7a395ef9146">smf_get_next_event()</a> in loop, until it returns NULL. Calling <a class="el" href="smf_8h.html#a04196d97efad70b7195211afa54d9d10">smf_load()</a> causes the smf to be rewound to the start of the song.</p>
<p>Getting events by number works like this:</p>
<div class="fragment"><div class="line"><a class="code hl_struct" href="structsmf__track__struct.html">smf_track_t</a> *track = <a class="code hl_function" href="smf_8h.html#a0d5246855ad3c2f6fac80cb2e3dc7683">smf_get_track_by_number</a>(smf, track_number);</div>
<div class="line"><a class="code hl_struct" href="structsmf__event__struct.html">smf_event_t</a> *<span class="keyword">event</span> = <a class="code hl_function" href="smf_8h.html#a5fe89587e2b5fcb66a74f2e33f0e9082">smf_track_get_event_by_number</a>(track, event_number);</div>
<div class="ttc" id="asmf_8h_html_a0d5246855ad3c2f6fac80cb2e3dc7683"><div class="ttname"><a href="smf_8h.html#a0d5246855ad3c2f6fac80cb2e3dc7683">smf_get_track_by_number</a></div><div class="ttdeci">smf_track_t * smf_get_track_by_number(const smf_t *smf, int track_number)</div></div>
<div class="ttc" id="asmf_8h_html_a5fe89587e2b5fcb66a74f2e33f0e9082"><div class="ttname"><a href="smf_8h.html#a5fe89587e2b5fcb66a74f2e33f0e9082">smf_track_get_event_by_number</a></div><div class="ttdeci">smf_event_t * smf_track_get_event_by_number(const smf_track_t *track, size_t num)</div></div>
</div><!-- fragment --><p>To create new event, use <a class="el" href="smf_8h.html#a07beb3259e86dfb6afb8c9520b988725">smf_event_new()</a>, <a class="el" href="smf_8h.html#ac22e3575151470e85a8bc32bacd53069">smf_event_new_from_pointer()</a> or <a class="el" href="smf_8h.html#a171475907928e898af2713cb8b19d889">smf_event_new_from_bytes()</a>. First one creates an empty event - you need to manually allocate (using malloc(3)) buffer for <a class="el" href="namespaceMIDI.html">MIDI</a> data, write <a class="el" href="namespaceMIDI.html">MIDI</a> data into it, put the address of that buffer into event-&gt;midi_buffer, and the length of <a class="el" href="namespaceMIDI.html">MIDI</a> data into event-&gt;midi_buffer_length. <a class="el" href="classNote.html">Note</a> that deleting the event (using <a class="el" href="smf_8h.html#a9f36bddbf764b1eee6053d0adb9cbf94">smf_event_delete()</a>) will free the buffer.</p>
<p>Second form does most of this for you: it takes an address of the buffer containing <a class="el" href="namespaceMIDI.html">MIDI</a> data, allocates storage and copies <a class="el" href="namespaceMIDI.html">MIDI</a> data into it.</p>
<p>Third form is useful for manually creating short events, up to three bytes in length, for example <a class="el" href="classNote.html">Note</a> On or <a class="el" href="classNote.html">Note</a> Off events. It simply takes three bytes and creates <a class="el" href="namespaceMIDI.html">MIDI</a> event containing them. If you need to create <a class="el" href="namespaceMIDI.html">MIDI</a> message that takes only two bytes, pass -1 as the third byte. For one byte message (System Realtime), pass -1 as second and third byte.</p>
<p>To free an event, use <a class="el" href="smf_8h.html#a9f36bddbf764b1eee6053d0adb9cbf94">smf_event_delete()</a>.</p>
<p>To add event to the track, use <a class="el" href="smf_8h.html#a08a999d56e238fa699b99ba410a4a5ee">smf_track_add_event_delta_pulses()</a>, <a class="el" href="smf_8h.html#a3547c0b365dbcfc44966de4cd32a1774">smf_track_add_event_pulses()</a>, or smf_track_add_event_seconds(). The difference between them is in the way you specify the time of the event - with the first one, you specify it as an interval, in pulses, from the previous event in this track; with the second one, you specify it as pulses from the start of the song, and with the last one, you specify it as seconds from the start of the song. Obviously, the first version can only append events at the end of the track.</p>
<p>To remove an event from the track it's attached to, use <a class="el" href="smf_8h.html#a05a631e16fe7053d63d5cbd06354fcb7">smf_event_remove_from_track()</a>. You may want to free the event (using <a class="el" href="smf_8h.html#a9f36bddbf764b1eee6053d0adb9cbf94">smf_event_delete()</a>) afterwards.</p>
<p>To create new track, use <a class="el" href="smf_8h.html#a301e6df492a87d9ee787df9468962194">smf_track_new()</a>. To add track to the smf, use <a class="el" href="smf_8h.html#a52ea0fb8ed789b6231f5e68de2340a5d">smf_add_track()</a>. To remove track from its smf, use <a class="el" href="smf_8h.html#aa743261baf480185f188aa39ad66f584">smf_track_remove_from_smf()</a>. To free the track structure, use <a class="el" href="smf_8h.html#a5de2c15f97ad2684baea7b49bb4718b8">smf_track_delete()</a>.</p>
<p><a class="el" href="classNote.html">Note</a> that libsmf keeps things consistent. If you free (using <a class="el" href="smf_8h.html#a5de2c15f97ad2684baea7b49bb4718b8">smf_track_delete()</a>) a track that is attached to an smf and contains events, libsmf will detach the events, free them, detach the track, free it etc.</p>
<p>Tracks and events are numbered consecutively, starting from one. If you remove a track or event, the rest of tracks/events will get renumbered. To get the number of a given event in its track, use event-&gt;event_number. To get the number of track in its smf, use track-&gt;track_number. To get the number of events in the track, use track-&gt;number_of_events. To get the number of tracks in the smf, use smf-&gt;number_of_tracks.</p>
<p>In SMF File Format, each track has to end with End Of Track metaevent. If you load SMF file using <a class="el" href="smf_8h.html#a04196d97efad70b7195211afa54d9d10">smf_load()</a>, that will be the case. If you want to create or edit an SMF, you don't need to worry about EOT events; libsmf automatically takes care of them for you. If you try to save an SMF with tracks that do not end with EOTs, <a class="el" href="smf_8h.html#ac291e35003148c299da38d8055dffd88">smf_save()</a> will append them. If you try to add event that happens after EOT metaevent, libsmf will remove the EOT. If you want to add EOT manually, you can, of course, using smf_track_add_eot_seconds() or <a class="el" href="smf_8h.html#a1005dd72053946bd87c6f11b4d670503">smf_track_add_eot_pulses()</a>.</p>
<p>Each event carries three time values - event-&gt;time_seconds, which is seconds since the start of the song, event-&gt;time_pulses, which is PPQN clocks since the start of the song, and event-&gt;delta_pulses, which is PPQN clocks since the previous event in that track. These values are invalid if the event is not attached to the track. If event is attached, all three values are valid. Time of the event is specified when adding the event (using smf_track_add_event_seconds(), <a class="el" href="smf_8h.html#a3547c0b365dbcfc44966de4cd32a1774">smf_track_add_event_pulses()</a> or <a class="el" href="smf_8h.html#a08a999d56e238fa699b99ba410a4a5ee">smf_track_add_event_delta_pulses()</a>); the remaining two values are computed from that.</p>
<p>Tempo related stuff happens automatically - when you add a metaevent that is Tempo PropertyChange or Time Signature, libsmf adds that event to the tempo map. If you remove Tempo PropertyChange event that is in the middle of the song, the rest of the events will have their event-&gt;time_seconds recomputed from event-&gt;time_pulses before <a class="el" href="smf_8h.html#a05a631e16fe7053d63d5cbd06354fcb7">smf_event_remove_from_track()</a> function returns. Adding Tempo PropertyChange in the middle of the song works in a similar way.</p>
<p><a class="el" href="namespaceMIDI.html">MIDI</a> data (event-&gt;midi_buffer) is always kept in normalized form - it always begins with status byte (no running status), there are no System Realtime events embedded in them etc. Events like SysExes are in "on the wire" form, without embedded length that is used in SMF file format. Obviously libsmf "normalizes" <a class="el" href="namespaceMIDI.html">MIDI</a> data during loading and "denormalizes" (adding length to SysExes, escaping System Common and System Realtime messages etc) during writing.</p>
<p><a class="el" href="classNote.html">Note</a> that you always have to first add the track to smf, and then add events to the track. Doing it the other way around will trip asserts. Also, try to add events at the end of the track and remove them from the end of the track, that's much more efficient.</p>
<p>All the libsmf functions have prefix "smf_". First argument for routines whose names start with "smf_event_" is "smf_event_t *", for routines whose names start with "smf_track_" - "smf_track_t *", and for plain "smf_" - "smf_t *". The only exception are smf_whatever_new routines. Library does not use any global variables and is thread-safe, as long as you don't try to work on the same SMF (smf_t and its descendant tracks and events) from several threads at once without protecting it with mutex. Library depends on glib and nothing else. License is BSD, two clause, which basically means you can use it freely in your software, both Open Source (including GPL) and closed source. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sat Aug 30 2025 20:23:14 for Ardour by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
